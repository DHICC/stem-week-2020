<!Doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>stage 4</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  </head>
  <body>
    <div class = 'container-fluid'>
      <br>
      <br>
      <!----Change: description---->
      <h1 class = 'white' style='font-size: 50px;'>Greek</h1>
      <p class = 'white' style='font-size: 20px;'>Focus on the centre</p>
      <p class = 'white'style='font-size: 16px;'><a href = 'https://i.imgur.com/sNYEuDf.png'>https://i.imgur.com/sNYEuDf.png</a></p>
      <p class = 'white' style='font-size: 15px;'>Origin: Corinth, Greece</p>
      <!-------------------------->
      <br>
      <br>
      <div class = 'key-input'>
        <form method = 'POST'>
          <div class = 'key-input-group d-block text-center'>
            <!----Change---->
            <div class = 'key-input-label d-block text-center'>Key 4
            </div>
            <!------------->
            <br>
            <div class = 'key-input-answer d-block text-center px-2 mb-3'>
              <!----Change: number of boxes---->
              <div class = 'word d-inline-block'>
                <input name = 'key_input[]' maxlength ='1' class = 'letter'>
                <input name = 'key_input[]' maxlength ='1' class = 'letter'>
                <input name = 'key_input[]' maxlength ='1' class = 'letter'>
                <input name = 'key_input[]' maxlength ='1' class = 'letter'>
                <input name = 'key_input[]' maxlength ='1' class = 'letter'>
                <input name = 'key_input[]' maxlength ='1' class = 'letter'>
                <input name = 'key_input[]' maxlength ='1' class = 'letter'>
              <!---------------------------->
              </div>
            </div>
          </div>
          <div class="text-center">
            <button type="submit" id='submit' class='submit'>SUBMIT</button>
          </div>
        </form>
      </div>
      <br>
      <br>
      <br>
      <!----Change: number of hints---->
      <div class='text-center'>
        <button type='button' class='hint' id='hint'>Reveal Hint</button>
      </div>
      <!---------------------------->
      <br><br>
      <div class='text-center' id='next-container'>
          <a href = '/'>
          <button type='button' class='next'>Return home</button>
          </a>
          <a href = 'easy_stage5.html'>
          <button type='button' class='next' id='next'>Next stage</button>
          </a>
      </div>           
    </div>
  </body>
  <script>
    document.getElementById("hint").addEventListener('click', function(event){
      alert('Find hints at https://medium.com/@dmitryrodionoff/lecture-3-1-scripts-and-calligraphy-5ad27462bc23')
    })

    const nextButton = document.getElementById('next-container')

      nextButton.classList.add('hide')

      document.getElementById("submit").addEventListener('click', function(event){
        var answer = append()
        event.preventDefault()
        showNext() 

        const option = {
          method: 'POST',
          headers: {
          'Content-Type': 'application/json'
          },
          body: JSON.stringify(answer),
          credentials: 'include'
        }

        fetch('https://stem-week-cipher.herokuapp.com/testAnswer', option)
        .then(response => response.json()) //if response is json in nature
        .then(function (data) {
          //do something with data
        })
        .catch(function (error) {
          //do smth when error happens
        })
        })
        
      function showNext(){
        //do the check
        var correct = true
        if (correct == true){
          nextButton.classList.remove('hide')
        }
      }

      function append(){
        var nodeString = ''
        var numberInputBox = document.getElementsByName('key_input[]').length
        for (i=0; i < numberInputBox; i++){
          var x = document.getElementsByName('key_input[]')[i].value
          nodeString += x
        }
        //console.log(nodeString)
        return nodeString
        }
  </script>
</html>
